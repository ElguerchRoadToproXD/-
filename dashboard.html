<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="shared-style.css">
  <style>
    /* Dashboard specific simple styles */
    .dashboard-header {
      background-color: var(--bg-color);
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid var(--border-color);
      margin-bottom: 2rem;
    }

    .project-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1.5rem;
    }

    .project-card {
      background: var(--bg-color);
      border: 1px solid var(--border-color);
      border-radius: var(--radius);
      padding: 1.5rem;
      box-shadow: var(--shadow);
    }

    .project-card img {
      width: 100%;
      height: 180px;
      object-fit: cover;
      border-radius: var(--radius);
      margin-bottom: 1rem;
    }

    .form-input {
      width: 100%;
      padding: 0.75rem;
      margin-bottom: 1rem;
      border: 1px solid var(--border-color);
      border-radius: var(--radius);
      font-family: inherit;
    }

    .form-label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: var(--text-primary);
    }

    .btn-logout {
      background-color: #ef4444;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: var(--radius);
      cursor: pointer;
    }

    .btn-upload {
      background-color: var(--primary-color);
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: var(--radius);
      cursor: pointer;
      font-weight: 600;
      width: 100%;
    }

    .upload-section {
      background-color: #ffffff;
      padding: 3rem;
      border-radius: 16px;
      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
      margin-bottom: 4rem;
      max-width: 700px;
      margin-right: auto;
      margin-left: auto;
      border: 1px solid var(--border-color);
    }

    .empty-state {
      background: white;
      border-radius: var(--radius);
      padding: 3rem;
      text-align: center;
      grid-column: 1 / -1;
      box-shadow: var(--shadow);
    }

    .empty-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
      opacity: 0.5;
    }
  </style>
</head>

<body>

  <script>
    // ğŸ” ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¯Ø®ÙˆÙ„
    const admin = localStorage.getItem("adminUser");
    const prof = localStorage.getItem("profUser");
    if (!admin && !prof) {
      window.location.href = "admin_login.html";
    }
  </script>

  <header class="dashboard-header">
    <h2>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>
    <button class="btn-logout" onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
  </header>

  <div class="footer-container"> <!-- Using container from shared styles -->

    <!-- Ø±ÙØ¹ Ù…Ø´Ø±ÙˆØ¹ -->
    <div class="upload-section">
      <h2 style="margin-bottom: 2rem; text-align: center; font-weight: 800;">Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø¯ÙŠØ¯</h2>

      <div class="form-group">
        <label class="form-label">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</label>
        <input id="title" class="form-input" placeholder="Ø£Ø¯Ø®Ù„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø´Ø±ÙˆØ¹">
      </div>

      <div class="form-group">
        <label class="form-label">ÙˆØµÙ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</label>
        <input id="desc" class="form-input" placeholder="Ø£Ø¯Ø®Ù„ ÙˆØµÙ Ù…Ø®ØªØµØ±">
      </div>

      <div class="form-group">
        <label class="form-label">ğŸ“· ØµÙˆØ±Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</label>
        <input id="image" class="form-input" type="file" accept="image/*">
      </div>

      <div class="form-group">
        <label class="form-label">ğŸ“ Ù…Ù„Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</label>
        <input id="file" class="form-input" type="file" accept=".pdf,.doc,.docx,.ppt,.pptx,.mp4,.zip">
      </div>

      <button onclick="uploadProject()" class="btn-upload">Ø§Ø³ØªÙŠØ±Ø§Ø¯</button>
    </div>

    <!-- Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ -->
    <h3 style="margin-bottom: 1.5rem; font-size: 1.5rem; color: #fff; text-align: center;">Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ù…ØªØ§Ø­Ø©</h3>
    <div id="projects" class="project-grid"></div>

  </div>

  <script>
    let projects = JSON.parse(localStorage.getItem("projects") || "[]");

    function uploadProject() {
      const title = titleInput.value.trim();
      const desc = descInput.value.trim();
      const img = image.files[0];
      const file = fileInput.files[0];

      if (!title || !desc) {
        alert("Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ùˆ Ø§Ù„ÙˆØµÙ");
        return;
      }

      const readerImg = new FileReader();
      const readerFile = new FileReader();

      const processUpload = () => {
        projects.push({
          id: Date.now(),
          title,
          desc,
          image: img ? readerImg.result : "",
          file: file ? readerFile.result : "",
          owner: admin || prof
        });

        localStorage.setItem("projects", JSON.stringify(projects));
        alert("ØªÙ… Ø§Ù„Ø±ÙØ¹ Ø¨Ù†Ø¬Ø§Ø­ âœ…");
        loadProjects();

        // Clear inputs
        titleInput.value = "";
        descInput.value = "";
        image.value = "";
        fileInput.value = "";
      };

      if (img) {
        readerImg.onload = () => {
          if (file) {
            readerFile.onload = processUpload;
            readerFile.readAsDataURL(file);
          } else {
            readerFile.onload = processUpload; // Call dummy onload
            processUpload();
          }
        };
        readerImg.readAsDataURL(img);
      } else {
        if (file) {
          readerFile.onload = processUpload;
          readerFile.readAsDataURL(file);
        } else {
          processUpload();
        }
      }
    }

    function loadProjects() {
      projectsBox.innerHTML = "";

      if (projects.length === 0) {
        projectsBox.innerHTML = `
            <div class="empty-state">
                <div class="empty-icon">ğŸ“‚</div>
                <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´Ø§Ø±ÙŠØ¹ Ø­Ø§Ù„ÙŠØ§Ù‹</h3>
                <p style="color: var(--text-secondary);">Ù‚Ù… Ø¨Ø±ÙØ¹ Ù…Ø´Ø±ÙˆØ¹Ùƒ Ø§Ù„Ø£ÙˆÙ„ Ù„ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§</p>
            </div>
          `;
        return;
      }

      projects.forEach(p => {
        projectsBox.innerHTML += `
    <div class="project-card">
      ${p.image ? `<img src="${p.image}">` : ""}
      <h4 style="margin-bottom:0.5rem; font-size:1.2rem;">${p.title}</h4>
      <p style="color:var(--text-secondary); margin-bottom:1rem;">${p.desc}</p>
      ${p.file ? `<a href="${p.file}" download style="color:var(--primary-color); font-weight:600;">â¬‡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù</a>` : ""}
    </div>
    `;
      });
    }

    function logout() {
      localStorage.removeItem("adminUser");
      localStorage.removeItem("profUser");
      localStorage.removeItem("adminLoggedIn");
      localStorage.removeItem("profLoggedIn");
      window.location.href = "index.html";
    }

    const titleInput = document.getElementById("title");
    const descInput = document.getElementById("desc");
    const image = document.getElementById("image");
    const fileInput = document.getElementById("file");
    const projectsBox = document.getElementById("projects");

    loadProjects();
  </script>

</body>

</html>